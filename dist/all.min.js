function initCanvas(){stage=new createjs.Stage("theCanvas"),homeSection=$("#home"),loadingBox=$("#loading-box"),scrollDownArrow=$("#scroll-down-arrow"),createjs.Ticker.setFPS(60),createjs.Ticker.addEventListener("tick",stage),window.addEventListener("resize",resizeCanvas,!1),resizeCanvas(),manifest=[{id:"bigSkyline",src:imagePath+"big_skyline.png"},{id:"street",src:imagePath+"street.png"},{id:"policecar",src:imagePath+"policecar.png",y:400},{id:"beetle",src:imagePath+"beetle.png",y:400},{id:"dodge",src:imagePath+"dodge.png",y:400},{id:"bmw",src:imagePath+"bmw.png",y:400},{id:"truck",src:imagePath+"truck.png",y:350},{id:"helicopter",src:imagePath+"helicopter.png",y:100},{id:"helicopter_small",src:imagePath+"helicopter_small.png",y:50}],loadQueue=new createjs.LoadQueue,loadQueue.addEventListener("complete",handleComplete),loadQueue.addEventListener("progress",handleProgress),loadQueue.loadManifest(manifest)}function handleProgress(e){loadingBox.text(Math.round(e.loaded/e.total*100)+"%")}function handleComplete(){scrollDownArrow.show(),loadingBox.hide(),buildCanvas()}function resizeCanvas(){stage.canvas.width=homeSection.width(),stage.canvas.height=homeSection.height(),stage.update()}function startCanvasAnimation(){background1.startAnimation(),background2.startAnimation(),cars.startAnimation(),helicopter.startAnimation()}function stopCanvasAnimation(){background1.stopAnimation(),background2.stopAnimation(),cars.stopAnimation(),helicopter.stopAnimation()}function buildCanvas(){background1=new Background(manifest[0].src,3207,0,.3),stage.addChild(background1),background1.startAnimation(),helicopter=new MovingVehicles([manifest[7],manifest[8]],10,15e3),stage.addChild(helicopter),background2=new Background(manifest[1].src,2300,120,.5),stage.addChild(background2),background2.startAnimation(),cars=new MovingVehicles([manifest[2],manifest[3],manifest[4],manifest[5],manifest[6]],8,7e3),stage.addChild(cars)}!function(){var e=function(e,t,n,i){this.initialize(e,t,n,i)},t=e.prototype=new createjs.Container;t.Container_initialize=t.initialize,t.initialize=function(e,t,n,i){this.Container_initialize(),this.imageWidth=t,this.speed=i,this.image1=new createjs.Bitmap(e),this.image1.y=n,this.image2=new createjs.Bitmap(e),this.image2.x=this.imageWidth,this.image2.y=n,this.addChild(this.image1,this.image2)},t.moveBg=function(e){var t=e.target;t.image1.x-=t.speed,t.image2.x-=t.speed,t.image1.x<-t.imageWidth&&(t.image1.x=t.imageWidth),t.image2.x<-t.imageWidth&&(t.image2.x=t.imageWidth)},t.startAnimation=function(){this.addEventListener("tick",t.moveBg)},t.stopAnimation=function(){this.removeEventListener("tick",t.moveBg)},window.Background=e}(),function(){var e=function(e,t,n){this.initialize(e,t,n)},t=e.prototype=new createjs.Container;t.Container_initialize=t.initialize,t.initialize=function(e,n,i){this.Container_initialize(),this.vehicles=[],this.directionFactor=1,this.speed=n,this.interval=i,this.currentVehicle=null;for(var a=0;a<e.length;a++){var o=new createjs.Bitmap(e[a].src);o.y=e[a].y,this.addChild(o),o.visible=!1,this.vehicles.push(o)}t.showRandomVehicle(this)},t.showRandomVehicle=function(e){null!=e.currentVehicle&&(e.currentVehicle.visible=!1);var n=Math.floor(Math.random()*e.vehicles.length);switch(e.currentVehicle=e.vehicles[n],e.currentVehicle.visible=!0,e.directionFactor*=-1,e.directionFactor){case 1:e.currentVehicle.scaleX=1,e.currentVehicle.x=-500;break;case-1:e.currentVehicle.scaleX=-1,e.currentVehicle.x=stage.canvas.width+500}e.removeEventListener("tick",t.moveVehicle);var i=Math.random()*e.interval;setTimeout(function(n){e.addEventListener("tick",t.moveVehicle)},i)},t.moveVehicle=function(e){var n=e.target;n.currentVehicle.x+=n.speed*n.directionFactor,1==n.directionFactor&&n.currentVehicle.x>stage.canvas.width?t.showRandomVehicle(n):-1==n.directionFactor&&n.currentVehicle.x<0&&t.showRandomVehicle(n)},t.startAnimation=function(){this.addEventListener("tick",t.moveVehicle)},t.stopAnimation=function(){this.removeEventListener("tick",t.moveVehicle)},window.MovingVehicles=e}(),$(document).ready(function(){function e(){$.getJSON("data/sitedata.json",function(e){if(c=e,$.each(e,function(e,t){var n=$("<li>").html('<a href="#'+t.name+'">'+t.title[b]+"</a></li>").appendTo("#nav > ul");n.click(function(e){$("#nav li a").removeClass("active"),$(this).find("a").addClass("active");var n=document.getElementById(t.name).offsetTop;i(n),l.trigger("click")})}),f.html(e[1].description[b]),$.each(e[2].projects,function(e,t){var n=$('<div class="web-item module">').html('<div class="web-item-title">'+t.title+"</div><p>"+t.description[b]+"</p></div>").appendTo("#web > .section-content");n.css({"background-image":'url("images/'+t.image+'")',"background-repeat":"no-repeat","background-position":"5px 30px"}),n.click(function(){window.open(t.url,"_blank")})}),$.each(e[3].projects,function(e,t){$(".music_tab_but:eq("+e+")").text(t.title[b]);var n=$('<div class="music-item module">').html('<p class="cat-title">'+t.title[b]+"</p>").appendTo("#music > .section-content");$.each(t.songs,function(e,t){var i=$("<div>").html('<a href="#">'+t.title+"</a></div>").appendTo(n);if(void 0!=t.description){$("<div>").html('<div class="song-descr">'+t.description[b]+"</div></div>").appendTo(i)}i.click(function(e){e.preventDefault(),$("#music a").removeClass("active"),$(this).find("a").addClass("active");var n=t.file,i="music/"+n+"."+w;y.setAttribute("src",i),y.addEventListener("canplaythrough",r,!1)})})}),$(".music-item:eq(1)").hide(),u.addClass("active"),y=document.getElementById("audio-player"),w=a(y),""==w)return void alert("no audio support");$('<div class="contact-item module">').html(e[4].tel+"</div>").appendTo("#contact > .section-content"),$('<div class="contact-item module">').html(e[4].email+"</div>").appendTo("#contact > .section-content");$(".section-heading").each(function(e){$(this).text(c[e].title[b])}),$(window).scrollEnd(function(){$(window).scrollTop()<450?startCanvasAnimation():stopCanvasAnimation()},1e3),k=$(document).width()>768,x=$(".module"),x.each(function(e,t){var t=$(t);t.visible(!0)&&t.addClass("already-visible")}),initCanvas()})}function t(e){l.trigger("click"),e!=b&&(b=e,f.html(c[1].description[b]),$(".section-heading").each(function(e){$(this).text(c[e].title[b])}),$("#nav").find("li a").each(function(e){$(this).text(c[e].title[b])}),$("#web").find("p").each(function(e){$(this).text(c[2].projects[e].description[b])}),$(".cat-title").each(function(e){$(this).text(c[3].projects[e].title[b])}),$("#music").find(".song-descr").each(function(e){$(this).text(c[3].projects[0].songs[e].description[b])}),$(".music_tab_but").each(function(e){$(this).text(c[3].projects[e].title[b])}))}function n(e){$("#nav li a").removeClass("active");for(var t=0;t<c.length;t++)if(c[t].name==e){var n=$("#nav ul li a").eq(t);n.addClass("active")}}function i(e){scrollTopElement=o(),$(scrollTopElement).stop().animate({scrollTop:e},1e3)}function a(e){var t="";return"probably"==e.canPlayType("audio/mp3")||"maybe"==e.canPlayType("audio/mp3")?t="mp3":"probably"==e.canPlayType("audio/ogg")||"maybe"==e.canPlayType("audio/ogg")?t="ogg":"probably"!=e.canPlayType("audio/wav")&&"maybe"!=e.canPlayType("audio/wav")||(t="wav"),t}function o(){if("CSS1Compat"!==document.compatMode)return"body";var e=document.documentElement,t=document.body,n=window.pageYOffset||t.scrollTop||e.scrollTop,i=n+1;window.scrollTo(0,i);var a=e.scrollTop===i?"html":"body";return window.scrollTo(0,n),a}function r(){y.play(),y.removeEventListener("canplaythrough",p.songLoaded,!1)}var c,s=$("#menu-button"),l=$("#menu-close-button"),d=$("#scroll-down-arrow"),u=$("#commisioned-tab-button"),m=$("#free-tab-button"),h=$("#nav"),f=$("#intro-text"),g=$("#dutch-flag"),v=$("#english-flag"),b=0,y=null,w="",C=$(window),x=null,k=!1;setTimeout(function(){var e=window.location.hash;if(""!=e){var t=location.hash.slice(1);n(t);var a=document.getElementById(t).offsetTop;i(a)}else{var o=$("#nav ul li a").eq(0);o.addClass("active")}},1e3),C.scroll(function(e){k&&x.each(function(e,t){var t=$(t);t.visible(!0)&&t.addClass("come-in")})}),$.fn.scrollEnd=function(e,t){$(this).scroll(function(){var n=$(this);n.data("scrollTimeout")&&clearTimeout(n.data("scrollTimeout")),n.data("scrollTimeout",setTimeout(e,t))})},$.fn.visible=function(e){var t=$(this),n=$(window),i=n.scrollTop(),a=i+n.height(),o=t.offset().top,r=o+t.height(),c=e===!0?r:o,s=e===!0?o:r;return a>=s&&c>=i},s.click(function(e){e.preventDefault(),s.fadeOut("slow"),h.fadeIn("slow")}),l.click(function(e){e.preventDefault(),s.fadeIn("slow"),h.fadeOut("slow")}),d.click(function(){n("about");var e=document.getElementById("about").offsetTop;i(e)}),u.click(function(){$(".music-item:eq(0)").show(),$(".music-item:eq(1)").hide(),u.addClass("active"),m.removeClass("active")}),m.click(function(){$(".music-item:eq(1)").show(),$(".music-item:eq(0)").hide(),u.removeClass("active"),m.addClass("active")}),g.click(function(){t(0)}),v.click(function(){t(1)}),e()});var stage,homeSection,loadingBox,myTween,loadQueue,manifest,imagePath="canvasimage/",background1,background2,cars,helicopter,speed=1;window.Modernizr=function(e,t,n){function i(e,t){return-1!==(""+e).indexOf(t)}function a(e,t){for(var i in e)if(m[e[i]]!==n&&(!t||t(e[i],u)))return!0}function o(e,t){var n=e.charAt(0).toUpperCase()+e.substr(1);return n=(e+" "+v.join(n+" ")+n).split(" "),!!a(n,t)}function r(){l.input=function(e){for(var t=0,n=e.length;n>t;t++)C[e[t]]=!!(e[t]in h);return C}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),l.inputtypes=function(e){for(var i,a=0,o=e.length;o>a;a++)h.setAttribute("type",e[a]),(i="text"!==h.type)&&(h.value=p,/^range$/.test(h.type)&&h.style.WebkitAppearance!==n?(d.appendChild(h),i=t.defaultView,i=i.getComputedStyle&&"textfield"!==i.getComputedStyle(h,null).WebkitAppearance&&0!==h.offsetHeight,d.removeChild(h)):/^(search|tel)$/.test(h.type)||(i=/^(url|email)$/.test(h.type)?h.checkValidity&&h.checkValidity()===!1:h.value!=p)),w[e[a]]=!!i;return w}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var c,s,l={},d=t.documentElement,u=t.createElement("modernizr"),m=u.style,h=t.createElement("input"),p=":)",f=Object.prototype.toString,g=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),v="Webkit Moz O ms Khtml".split(" "),b={svg:"http://www.w3.org/2000/svg"},y={},w={},C={},x=[],k=function(e){var n=document.createElement("style"),i=t.createElement("div");return n.textContent=e+"{#modernizr{height:3px}}",(t.head||t.getElementsByTagName("head")[0]).appendChild(n),i.id="modernizr",d.appendChild(i),e=3===i.offsetHeight,n.parentNode.removeChild(n),i.parentNode.removeChild(i),!!e},T=function(){var e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return function(t,i){i=i||document.createElement(e[t]||"div"),t="on"+t;var a=t in i;return a||(i.setAttribute||(i=document.createElement("div")),i.setAttribute&&i.removeAttribute&&(i.setAttribute(t,""),a="function"==typeof i[t],"undefined"!=typeof i[t]&&(i[t]=n),i.removeAttribute(t))),a}}(),$={}.hasOwnProperty;s="undefined"!=typeof $&&"undefined"!=typeof $.call?function(e,t){return $.call(e,t)}:function(e,t){return t in e&&"undefined"==typeof e.constructor.prototype[t]},y.flexbox=function(){var e=t.createElement("div"),n=t.createElement("div");!function(e,t,n,i){t+=":",e.style.cssText=(t+g.join(n+";"+t)).slice(0,-t.length)+(i||"")}(e,"display","box","width:42px;padding:0;"),n.style.cssText=g.join("box-flex:1;")+"width:10px;",e.appendChild(n),d.appendChild(e);var i=42===n.offsetWidth;return e.removeChild(n),d.removeChild(e),i},y.canvas=function(){var e=t.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},y.canvastext=function(){return!(!l.canvas||"function"!=typeof t.createElement("canvas").getContext("2d").fillText)},y.webgl=function(){var e=t.createElement("canvas");try{if(e.getContext("webgl"))return!0}catch(n){}try{if(e.getContext("experimental-webgl"))return!0}catch(i){}return!1},y.touch=function(){return"ontouchstart"in e||k("@media ("+g.join("touch-enabled),(")+"modernizr)")},y.geolocation=function(){return!!navigator.geolocation},y.postmessage=function(){return!!e.postMessage},y.websqldatabase=function(){return!!e.openDatabase},y.indexedDB=function(){for(var t=-1,n=v.length;++t<n;){var i=v[t].toLowerCase();if(e[i+"_indexedDB"]||e[i+"IndexedDB"])return!0}return!1},y.hashchange=function(){return T("hashchange",e)&&(document.documentMode===n||document.documentMode>7)},y.history=function(){return!(!e.history||!history.pushState)},y.draganddrop=function(){return T("drag")&&T("dragstart")&&T("dragenter")&&T("dragover")&&T("dragleave")&&T("dragend")&&T("drop")},y.websockets=function(){return"WebSocket"in e},y.rgba=function(){return m.cssText="background-color:rgba(150,255,150,.5)",i(m.backgroundColor,"rgba")},y.hsla=function(){return m.cssText="background-color:hsla(120,40%,100%,.5)",i(m.backgroundColor,"rgba")||i(m.backgroundColor,"hsla")},y.multiplebgs=function(){return m.cssText="background:url(//:),url(//:),red url(//:)",/(url\s*\(.*?){3}/.test(m.background)},y.backgroundsize=function(){return o("backgroundSize")},y.borderimage=function(){return o("borderImage")},y.borderradius=function(){return o("borderRadius","",function(e){return i(e,"orderRadius")})},y.boxshadow=function(){return o("boxShadow")},y.textshadow=function(){return""===t.createElement("div").style.textShadow},y.opacity=function(){var e=g.join("opacity:.5;")+"";return m.cssText=e,i(m.opacity,"0.5")},y.cssanimations=function(){return o("animationName")},y.csscolumns=function(){return o("columnCount")},y.cssgradients=function(){var e=("background-image:"+g.join("gradient(linear,left top,right bottom,from(#9f9),to(white));background-image:")+g.join("linear-gradient(left top,#9f9, white);background-image:")).slice(0,-17);return m.cssText=e,i(m.backgroundImage,"gradient")},y.cssreflections=function(){return o("boxReflect")},y.csstransforms=function(){return!!a(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"])},y.csstransforms3d=function(){var e=!!a(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);return e&&(e=k("@media ("+g.join("transform-3d),(")+"modernizr)")),e},y.csstransitions=function(){return o("transitionProperty")},y.fontface=function(){var e,n=t.head||t.getElementsByTagName("head")[0]||d,i=t.createElement("style"),a=t.implementation||{hasFeature:function(){return!1}};return i.type="text/css",n.insertBefore(i,n.firstChild),e=i.sheet||i.styleSheet,n=a.hasFeature("CSS2","")?function(t){if(!e||!t)return!1;var n=!1;try{e.insertRule(t,0),n=!/unknown/i.test(e.cssRules[0].cssText),e.deleteRule(e.cssRules.length-1)}catch(i){}return n}:function(t){return e&&t?(e.cssText=t,0!==e.cssText.length&&!/unknown/i.test(e.cssText)&&0===e.cssText.replace(/\r+|\n+/g,"").indexOf(t.split(" ")[0])):!1},l._fontfaceready=function(e){e(l.fontface)},n('@font-face { font-family: "font"; src: "font.ttf"; }')},y.video=function(){var e=t.createElement("video"),n=!!e.canPlayType;return n&&(n=new Boolean(n),n.ogg=e.canPlayType('video/ogg; codecs="theora"'),n.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"')||e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"'),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"')),n},y.audio=function(){var e=t.createElement("audio"),n=!!e.canPlayType;return n&&(n=new Boolean(n),n.ogg=e.canPlayType('audio/ogg; codecs="vorbis"'),n.mp3=e.canPlayType("audio/mpeg;"),n.wav=e.canPlayType('audio/wav; codecs="1"'),n.m4a=e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")),n},y.localstorage=function(){try{return"localStorage"in e&&null!==e.localStorage}catch(t){return!1}},y.sessionstorage=function(){try{return"sessionStorage"in e&&null!==e.sessionStorage}catch(t){return!1}},y.webWorkers=function(){return!!e.Worker},y.applicationcache=function(){return!!e.applicationCache},y.svg=function(){return!!t.createElementNS&&!!t.createElementNS(b.svg,"svg").createSVGRect},y.inlinesvg=function(){var e=document.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==b.svg},y.smil=function(){return!!t.createElementNS&&/SVG/.test(f.call(t.createElementNS(b.svg,"animate")))},y.svgclippaths=function(){return!!t.createElementNS&&/SVG/.test(f.call(t.createElementNS(b.svg,"clipPath")))};for(var E in y)s(y,E)&&(c=E.toLowerCase(),l[c]=y[E](),x.push((l[c]?"":"no-")+c));return l.input||r(),l.crosswindowmessaging=l.postmessage,l.historymanagement=l.history,l.addTest=function(e,t){return e=e.toLowerCase(),l[e]?void 0:(t=!!t(),d.className+=" "+(t?"":"no-")+e,l[e]=t,l)},m.cssText="",u=h=null,e.attachEvent&&function(){var e=t.createElement("div");return e.innerHTML="<elem></elem>",1!==e.childNodes.length}()&&function(e,t){function n(e){for(var t=-1;++t<o;)e.createElement(a[t])}function i(e,t){for(var n,a=e.length,o=-1,r=[];++o<a;)n=e[o],t=n.media||t,r.push(i(n.imports,t)),r.push(n.cssText);return r.join("")}var a="abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video".split("|"),o=a.length,r=RegExp("<(/*)(abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)","gi"),c=RegExp("\\b(abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)\\b(?!.*[;}])","gi"),s=t.createDocumentFragment(),l=t.documentElement,d=l.firstChild,u=t.createElement("style"),m=t.createElement("body");u.media="all",n(t),n(s),e.attachEvent("onbeforeprint",function(){for(var e=-1;++e<o;)for(var n=t.getElementsByTagName(a[e]),h=n.length,p=-1;++p<h;)n[p].className.indexOf("iepp_")<0&&(n[p].className+=" iepp_"+a[e]);d.insertBefore(u,d.firstChild),u.styleSheet.cssText=i(t.styleSheets,"all").replace(c,".iepp_$1"),s.appendChild(t.body),l.appendChild(m),m.innerHTML=s.firstChild.innerHTML.replace(r,"<$1bdo")}),e.attachEvent("onafterprint",function(){m.innerHTML="",l.removeChild(m),d.removeChild(u),l.appendChild(s.firstChild)})}(this,document),l._enableHTML5=!0,l._version="1.6",d.className=d.className.replace(/\bno-js\b/,"")+" js",d.className+=" "+x.join(" "),l}(this,this.document);